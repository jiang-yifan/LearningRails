<% method = user.persisted? ? 'patch' : 'post' %>
<% submit_name = user.persisted? ? 'Update!': 'Create!' %>

<% if user.errors.full_messages %>
  <% user.errors.full_messages.each do |msg| %>
    <div>
      <%= msg %>
    </div>
  <% end %>
<% end %>
<br>

<form  action="<%= user_url %>" method="post">
  <input type="hidden" name="_method" value="<%= method %>">
  <input type="hidden" name="authenticity_token"
  value="<%= form_authenticity_token %>">

  <label for="user_email">Email: </label>
  <input type="text" id= "user_email" name="user[email]" value="<%= user.email %>">
  <br>

  <label for="user_password">Password: </label>
  <input type="password" id= "user_password" name="user[password]">
  <br>

  <input type="submit" value="<%= submit_name %>">
</form>
